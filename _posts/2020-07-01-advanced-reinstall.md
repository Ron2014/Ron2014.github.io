---
layout: post
title: 今天装机了
date: 2020-07-01 23:31
description: 我收集的不是工具, 而是最快的轮子
toc: true
tags:
 - reinstall
 - Operating System
 - backup
---

## 需要记录一下

尽管昨天就在为今天的入职做准备, 但还是有点玩脱了, 列个单子记录一下...

首先, 入职必装机, 装机意味着什么? 意味着我可能很多东西又得从头做起:

1. Win10 Pro (Insider Preview)
2. WSL/WSL2 Linux 子系统, 为了支持这个就得捣鼓一堆配置把系统弄成 Preview 版.
3. 其他Win上仿Linux的系统 cygwin Msys2-MinGW
4. 虚拟机 VirtualBox: CentOS Ubuntu Win7 都有(文件都有100G+), 只不过玩 WSL2 要开 Hyper-V 会冲突, 就搁置了
5. Docker: 给 Windows 装了 Desktop, 给 WSL2 也装了 docker. 还有 docker pull 下来的那么多 image
6. **编译工具/编辑器/IDE**. 上面罗列了这么多系统, 自然每个都会装一下. 
   1. 比如 Vim 开发环境, 语法高亮/自动补全/关键字导航/目录树等功能都是独立的插件, 配置文件 .vimrc 都是自己一点一点收集起来的. 对于Win10 64位下的搭建还得专门处理 YCM 的编译问题, 我记得当时搞了很久. 
   2. 哪怕不提这种不省事的工具. 控制台/编辑器的中文字符编码支持得有吧. 一样也是要装一些工具, 改一些配置.
   3. 全套下来基本上 gcc/g++/cmake/vim/python2/python3/lua 都是标配
   4. linux 上能用 apt 就用 apt 装, apt 找不到的还得搜索包体下载, 自己编译安装
7. 搞了这么多, 又得管理好**环境变量**. 我出于喜欢, 会把常用的目录, 如 GITHUB 几个常用的 repo 和工作目录放到特定的地方然后给它设置环境变量方便 pushd. Path是改的最多的, 只要程序提供了控制台命令都得搞, 例如 java/lua. VS也会设置环境变量, 一些开源库使用前也要设置, 例如 DirectX. 
8. **Office** 必装, 而且是个大礼包, 要装很久, 还得想着破解. 程序会用到的 project/visio 通常还得单独安装.
9. **科学上网**工具, Chrome 和它的插件们, 还有我的梯子客户端. Chrome的安装是系统级的(直接装到C盘), 非常花时间.
10. **小工具**呢, 我也觉得难舍难分. 邮箱客户端/有道词典/Everything/Listary/010 Editor/快捷截屏/PicGo图床/有道云笔记 好像都少不了
11. 更小的. 你敢说 VS **插件**齐了? VS Code **插件**齐了? 很多工具还带 **快捷键设置** 的, 你敢说默认的互不冲突? 最烦的是, 自己都不会记得装了多少插件, 哪些快捷键要改. 有些软件会修改注册表, 建立鼠标邮件的**快捷菜单**.

装机, 想想都头大.

**任何东西从0开始安装, 都像是重复造轮子.**

## 只想复制粘贴, 不想从头安装

我的系统盘装在C, 我的所有和系统无关的安装程序(编译器/编辑器/Office/小工具/)装在D, 我的用户目录以及一些工作存档文件(如*.vscode-workspace) 都放在E.

逻辑似乎很清晰了, 有没有什么工具可以直接把C+D的数据直接复制粘贴到另一台机器, 部分重要的工作文件, 只需要人工简单处理E的拷贝就好.

我之前一直以为 `分区助手(AOMEI Partition Assistant)` 的 `迁移系统` 功能是做这个的, 结果发现不是, 迁移盘做启动盘会蓝屏.

![img]({{ '/assets/images/backup1.png' | relative_url }}){: .center-image }*迁移系统到固态硬盘并不是给异机备份用的*

最后我是用同一个公司(傲梅)出品的 `傲梅轻松备份免费版` 完成的这件事情. 值得一提的是:

- C盘 157G (系统备份)
- D盘 108G (分区备份)

备份到目标盘共 136G. 我在要重装的机器上同样安装了这个软件, 接上这个 136G, 通过`还原`功能, 还原到了新的C和D里. (警告说可能目标盘无法启动, 不要理)

后来才知道, 这个做法叫做 **系统备份, 异机还原**. 你在这个软件的左下角能看到`异机`字样就表示它的功能设计确实考虑了这个情况.

![img]({{ '/assets/images/backup0.png' | relative_url }}){: .center-image }*这个软件对外宣传就是一键ghost的简化版*

## 概念梳理

没有`异机`的搜索, 如 

1. `系统迁移`. 大多教程指的的是同一个机器下的. 而且这个功能是做给,想把系统盘是**机械硬盘升级为固态硬盘**的人用的. **目标盘还是跑在同一台机器上**, 迁移的数据包括硬件驱动和系统引导信息, 所以换一台机器会蓝屏. 
2. `系统备份`. 通常指的是一种容灾策略. 本意上, 还是为了预防机器操作不当损坏之后能还原到备份的状态. 大多数教程说的备份, 都是对**同一个硬盘, 甚至同一个分区**进行操作的. 系统迁移也可以当成备份用, 就是如果你要覆盖系统盘, 覆盖坏了, 迁移盘可以**当成临时系统盘**, 用它启动, 再将自己迁移回去.
3. `系统对拷`. 大多讲的都是一键ghost这个功能, 但自己对ghost的记忆停留在10年前. 不知道这个技术是否能够沿用在目前普及的固态硬盘/64位操作系统/多核芯片的情况. 有些人说Win10不支持, 时间有限, 也没有去验证这些说法.
4. `Win10自带备份`. 这个功能在设置里能找到. 虽然出自官方, 但并不可靠, 我157G的C盘, 目标盘居然要求至少316G(源的2倍), 这是出于何故呢? 这不是明摆着`司机拒载`的态度么?

## 时效性

1. `系统迁移` 预计2个半小时, 还得重启电脑执行, 直接over掉.
2. `Win10自带备份`就算准备了2倍空间, 也要花费大概3小时的时间.
3. `傲梅轻松备份` 完成C和D的备份, 总共花费40分钟. 还原C花了20分钟,  还原D花了10分钟. 备份不需要重启系统.

70分钟准备一台新机, 一开机什么都有了. 挺值得一试的.

综上, 还是国产的工具亲啊!( 也许某天会买正版:) )

最后吐槽一下, 为什么我家电脑嗡嗡地响, 公司电脑却是无声的呢?

该洗风扇了?